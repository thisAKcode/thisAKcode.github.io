https://rasor.github.io/using-pelican-blog-on-github-pages.html


title: How-to 1:  Blogging using Pelican.
date: 2020-03-21 22:22
Tags: Pelican, static site, markdown
Authors: Alex
Summary: Steps to follow in order to publish the first page on my blog using static site generator -Pelican.



Project Pages


To publish a Pelican site as a Project Page you need to push the content of the output dir generated by Pelican to a repository's gh-pages branch on GitHub.

The excellent ghp-import, which can be installed with pip, makes this process really easy.

For example, if the source of your Pelican site is contained in a GitHub repository, and if you want to publish that Pelican site in the form of Project Pages to this repository, you can then use the following:



The ghp-import output command updates the local gh-pages branch with the content of the output directory (creating the branch if it doesn't already exist). The git push origin gh-pages command updates the remote gh-pages branch, effectively publishing the Pelican site.

Note

The github target of the Makefile (and the gh_pages task of tasks.py) created by the pelican-quickstart command publishes the Pelican site as Project Pages, as described above.




## Create a blog on GitHub Pages with Pelican
This very first page took me many attempts and hours before I got this to work. The post you read is actually my second page on that blog and the second attempt to publish pages. If you are new to Pelican, that is for you. My post was inpsired by the great article by  Erik O'Shaughnessy. [Run your blog on GitHub Pages with Python][1]
[1]: https://opensource.com/article/19/5/run-your-blog-github-pages-python

## Everything in that howto were done using Cmder <https://cmder.net/>

# Steps: 
+ venv setup 
+ installing dependencies
+ creating github pages repo 
+ pelican-quickstart
+ push pelican genereated files to repo
+ writing content on local machine
+ Run Pelican and ghp-import in order to format content as html
+ Publish

# Step one: venv setup

    # create venv
    $ python -m virtualenv 'c:\blog_depend'
    # activate venv (notice 'c'  lowercased in path)
    $ cd 'c:\blog_depend\venv\Scripts'
    $. activate

# Step two: Installing pelican, Markdown and ghp-import into venv

    $ pip install pelican ghp-import Markdown
    # activate venv again
    $ cd 'c:\blog_depend\venv\Scripts'
    $ . activate

# Step three: creating github pages repo

    # create github repo on github.io
    # go to github.com, click on create a repo, create a repo named username.github.io

Github instructon apears. I ignore them. <br />
I left my repo empty, which is fine for that usecase. <br />
	
    # clone your empty Git repository to your local machine
    $ git clone https://github.com/thisAKcode/thisAKcode.github.io 'c:\blog_v2'
    # cd out of pwd back to your project folder e.g. to blog  directory
    $ cd 'c:\blog_v2'

# A tip from Erik O'Shaughnessy 
"...For user pages (pages hosted in repos named username.github.io), the content is 
served from the master branch.
I strongly prefer not to keep all the Pelican configuration files and raw Markdown 
files in master, rather just the web content. So I keep the Pelican configuration 
and the raw content in a separate branch I like to call content. (You can call it 
whatever you want, but the following instructions will call it content.) I like 
	this structure since I can throw away all the files in master and re-populate it 
	with the content branch." [Run your blog on GitHub Pages with Python][1]<br />
	[1]: https://opensource.com/article/19/5/run-your-blog-github-pages-python

    # Separate content from the output	
    # Following command both creates the brach 'content' and check out(goes) to that branch
    $ git checkout -b content
    # Switched to a new branch 'content' 

# Step four : pelican-quickstart

    # launch pelican-quickstart
    $ pelican-quickstart
    # After a set of questions, Pelican creates a bunch of files in current directory
    # Of course you need to read the docs to understand that step... <https://docs.getpelican.com/en/stable/>

# Step five: add files to repo.

    # Add all the Pelican-generated files to the content branch of the local Git repo.
    # While on content branch, commit and push the local changes to the remote to content branch:
    $ git add .
    $ git commit -m 'initial pelican commit to content'
    $ git push origin content

# Step six: Writing about.md and first-post.md

    $ cd content
    $ mkdir pages images
    # copy picture from location on \c\ into images
    $ cp 'c:\Users\Aleks\Pictures\profile.jpg' images
    $ touch first-post.md
    $ touch pages/about.md
    # first-post.md and about.md  has been created. Open and edit files using your favorite code editor.

# Step seven: Run Pelican and ghp-import

    # change dir to one containing publishconf.py
    $ cd 'c:\blog_v2'
    # Run Pelican to generate the static HTML files in output folder of project `$ pelican /path/to/your/content/ [-s path/to/your/settings.py]`
    
    $ pelican content -o output -s publishconf.py                           || $ pelican content -o output -s pelicanconf.py

    tips : use \blog_folder\etcetera formatting to format path to files. otherwise you get
    WARNING: Cannot get modification stamp. The filename, directory name, or volume label syntax is incorrect:
    CRITICAL: OSError: [WinError 123] The filename, directory name, or volume label syntax is incorrect:

### run ghp-import ( stands for GitHub-pages) add the contents of the output directory to the master branch: 
    $ ghp-import -m "Generate Pelican site" --no-jekyll -b master output    || $ ghp-import output -b gh-pages  
                                                                            updates the local gh-pages branch with the content of the output directory (creating the branch if it doesn't already exist)
    $ git push origin master                                                || $ git push origin gh-pages
                                                                            git push origin gh-pages command updates the remote gh-pages branch, effectively publishing the Pelican site.
    
    
###  Step eight:Push Pelican-created html files to master branch of the repo

    

    # push content to the gh-pages branch
    $ git add content                                                    | <content>â€¦ Files to add content from happende to be called content
    $ git commit -m "ok"                                                    
    $ git push origin gh-pages                                           | 
    
# Your new project is available at `thisAKcode.github.io`


# Main Project folder file and directory tree.
`

# Sources:
+ <https://docs.getpelican.com/en/3.0/getting_started.html>
+ <https://opensource.com/article/19/5/run-your-blog-github-pages-python>